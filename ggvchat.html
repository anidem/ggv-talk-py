<html>
<head>
	<link rel="stylesheet" type="text/css" class="__meteor-css__" href="/ggvchat.css?">
		

	<title>ggv.chat</title>
	<meta charset="utf-8">
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<meta http-equiv="expires" content="-1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="fragment" content="!">
	<meta name="distribution" content="global">
	<meta name="rating" content="general">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
</head>
<body>
	<div class="livechat-room">
		<div class="title" style="background-color:#666666; color: #FFFFFF">
			<div class="toolbar">&nbsp;
				<svg class="maximize" title="Maximize" viewBox="0 0 448 448" xmlns="http://www.w3.org/2000/svg">
					<path d="M64 352h320v-192h-320v192zM448 72v304c0 22-18 40-40 40h-368c-22 0-40-18-40-40v-304c0-22 18-40 40-40h368c22 0 40 18 40 40z"></path>
				</svg>
				<svg class="sound" title="Toggle notification sound" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg">
					<path d="M912 1696q0-16-16-16-59 0-101.5-42.5t-42.5-101.5q0-16-16-16t-16 16q0 73 51.5 124.5t124.5 51.5q16 0 16-16zm816-288q0 52-38 90t-90 38h-448q0 106-75 181t-181 75-181-75-75-181h-448q-52 0-90-38t-38-90q50-42 91-88t85-119.5 74.5-158.5 50-206 19.5-260q0-152 117-282.5t307-158.5q-8-19-8-39 0-40 28-68t68-28 68 28 28 68q0 20-8 39 190 28 307 158.5t117 282.5q0 139 19.5 260t50 206 74.5 158.5 85 119.5 91 88z"></path>
				</svg>
				<svg class="popout" aria-label="Open in a new window" viewBox="0 0 448 448" xmlns="http://www.w3.org/2000/svg">
					<path d="M320 232v-120c0-8.75-7.25-16-16-16h-120c-6.5 0-12.25 4-14.75 9.75-2.5 6-1.25 13 3.5 17.5l36 36-133.5 133.5c-6.25 6.25-6.25 16.25 0 22.5l25.5 25.5c6.25 6.25 16.25 6.25 22.5 0l133.5-133.5 36 36c3 3.25 7 4.75 11.25 4.75 2 0 4.25-0.5 6.25-1.25 5.75-2.5 9.75-8.25 9.75-14.75zM384 104v240c0 39.75-32.25 72-72 72h-240c-39.75 0-72-32.25-72-72v-240c0-39.75 32.25-72 72-72h240c39.75 0 72 32.25 72 72z"></path>
				</svg>					
			</div>
			<h1>Tutor is Offline</h1>
		</div>		
		
		<div class="offline">				
			<div class="error error-color error-background">
				<span></span>
			</div>			
		</div>

		<div>
			<ul id="messages"></ul>
			<div style="width:100%">
		    <form id="msg_form" action="">
		    	<input id="m" autocomplete="off" /><button>Send</button>
		    </form>
			</div>
		</div>

	</div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
    
    <script>
      $(function () {
        var socket = io();
        $username = "{{ chatuser }}";
		$room = "{{ chatroom }}";
        
        
        /* FORM HANDLING ************************************************/
        $("#msg_form").submit(function(){
          console.log(socket.connected);
          socket.emit("chat message", $("#m").val());
          $("#m").val("");
          return false;
        });

        $(document).ready(function() {
        	alert("document ready occurred!");
        	socket.emit('register', $username, $room);
		});

        // SOCKET EVENTS************************************************/ 
        socket.on("user registered", function (data) {
          connected = true;
          // Display the welcome message
          var message = data.username + " joined " + data.room_id;
          $("#messages").append($("<li>").text(message));
        });

        socket.on("chat message", function(msg){
          $("#messages").append($('<li>').text(msg));
        });
      });
    </script>
</body>
</html>